<!doctype html>
<html lang="en">
<link rel="icon" type="image/png" href="/assets/img/favicon.png" >
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="search-domain" value="https://revbayes.github.io/">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/syntax.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css" />
    <title>RevBayes: Compile on Linux</title>
  </head>
  <body>
    <div class="container">
      <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <a href="/" class="pull-left">
        
        <img class="navbar-logo" src="/assets/img/aquabayes-desaturated.png" alt="RevBayes Home" />
        
      </a>

      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar" align="right"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li><a href="/download">Download</a></li>
        <li><a href="/tutorials/">Tutorials</a></li>
        <li><a href="/documentation/">Documentation</a></li>
        <li><a href="/interfaces">Interfaces</a></li>
        <li><a href="/workshops/">Workshops</a></li>
        <li><a href="/jobs/">Jobs</a></li>
        <li><a href="/developer/">Developer</a></li>
        <li><class="header-search">
  <form class="header-search-form" action="/search.html" method="get">
    <input type="text" id="search-box-nav" placeholder="Search..." name="query" style="border-color:black;background-color:white;height:32px;">
    <button type="submit" style="color:black; border-color:black;width:32px;height:32px;padding-top:4px">
        <img src="https://revbayes.github.io/assets/img/search.png" height="22px" width="28px"/>
    </button>
  </form>
</div>

</li>
      </ul>
      <!-- <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form> -->
    </div>
  </div>
</nav>

      <!-- adds margin to main content -->
      <div class="container" style="padding-left:20px padding-right:20px;">
          <h1 class="maintitle">

Compile on Linux

</h1>
<hr>

<p><strong>NOTE: These instructions are for compiling the development branch.</strong></p>

<p>You can also <a href="https://github.com/revbayes/revbayes/blob/development/projects/meson/README.md">compile with meson</a> instead of cmake.</p>

<h2 id="pre-requisites">Pre-requisites</h2>

<p>You will need to have a C++ compiler installed on your computer. GCC 6 (or higher) and Clang 8 (or higher) should work.</p>

<p>You will also need to have CMake (3.5.1 or higher) and Boost (1.71 or higher) installed</p>

<h3 id="installing-pre-requisites-with-rootadministrator-priveleges">Installing pre-requisites <em>with</em> root/administrator priveleges</h3>

<p>Install these using your distribution’s package manager</p>

<h4 id="ubuntu">Ubuntu</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt update
sudo apt install build-essential cmake libboost-all-dev
</code></pre></div></div>

<h4 id="centos-8">CentOS 8</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo yum group install "Development Tools"
sudo yum install cmake boost-devel
</code></pre></div></div>

<h3 id="installing-pre-requisites-on-linux-computing-clusters">Installing pre-requisites on Linux computing clusters</h3>

<p>If you are compiling revbayes on a Linux cluster, you might need to select a version of gcc or cmake that is more recent than the default version.</p>

<p>Most high-performance compute clusters have additional software available as “modules”.
Using the <code class="language-plaintext highlighter-rouge">module avail</code> command followed by the name of the library will tell you if there is already a sufficiently recent version installed, thus saving you the effort of installing boost or cmake yourself:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module avail
module help gcc boost cmake
module load gcc
</code></pre></div></div>

<p>CMake, GCC and Boost are all commonly used in computational research, there will likely be a sufficiently recent version of gcc and cmake, and perhaps a recent enough version of boost.</p>

<h3 id="installing-pre-requisites-without-rootadministrator-priveleges">Installing pre-requisites <em>without</em> root/administrator priveleges</h3>

<p>If there is no compiler, you will need your administrator to install build-essential (or equivalent package containing gcc) for you. If possible, ask them to install cmake as well.</p>

<h4 id="installing-cmake">Installing cmake</h4>

<p>The simplest way to <a href="https://cmake.org/install/">install cmake</a> is to <a href="https://cmake.org/download/">download</a> a CMake executable.  For example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -O -L https://github.com/Kitware/CMake/releases/download/v3.22.1/cmake-3.22.1-linux-x86_64.tar.gz
tar -zxf cmake-3.22.1-linux-x86_64.tar.gz
cmake-3.22.1/bin/cmake --version
echo "cmake installed at: $(cd cmake-3.22.1/bin; pwd)/cmake"
</code></pre></div></div>

<p>Note the full path to the cmake executable!
You may replace the call to cmake on line 161 of <code class="language-plaintext highlighter-rouge">build.sh</code> with this path to use your custom cmake installation.</p>

<p>In the rare cases where the downloaded cmake executable will not run on your computer, you can also compile from source:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -O -L https://github.com/Kitware/CMake/releases/download/v3.22.1/cmake-3.22.1.tar.gz
tar -xzvf cmake-3.22.1.tar.gz
cd cmake-3.22.1/
./bootstrap -- -DCMAKE_USE_OPENSSL=OFF
make
bin/cmake --version
echo "cmake installed at: $(cd bin; pwd)/cmake"
</code></pre></div></div>

<p>Note the full path to the cmake executable.</p>

<h4 id="installing-boost">Installing boost</h4>

<p>Then you can compile boost:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -O -L https://archives.boost.io/release/1.88.0/source/boost_1_88_0.tar.gz
tar -xzvf boost_1_88_0.tar.gz
cd boost_1_88_0
./bootstrap.sh --with-libraries=atomic,chrono,filesystem,system,regex,thread,date_time,program_options,math,serialization --prefix=../installed-boost-1.88.0
./b2 link=static cxxflags=-std=c++17 install
echo -e "\n    BOOST root is at $(cd ../installed-boost-1.88.0; pwd)\n"
</code></pre></div></div>

<p>This creates a new directory called <code class="language-plaintext highlighter-rouge">installed-boost-1.88.0</code> that contains the boost installation.
This directory is called the BOOST “root”.
You will need the path to the BOOST root for the next step.</p>

<p>To set up an IDE such as XCode, the following directory should be added to compiler include paths:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/path/to/installed-boost-1.88.0/include
</code></pre></div></div>

<p>The following directory should be added to linker library paths:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/path/to/installed-boost-1.88.0/lib
</code></pre></div></div>

<h2 id="compile">Compile</h2>

<p>Download RevBayes from our github repository. Clone the repository using git by running the following command in the terminal:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone --branch development https://github.com/revbayes/revbayes.git revbayes
</code></pre></div></div>

<p>To compile with the system boost:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd revbayes/projects/cmake
./build.sh
</code></pre></div></div>

<p>You will likely see some compiler warnings. This is normal.</p>

<p>To compile revbayes using a locally compiled boost, do the following. Be sure to replace the paths in the build command with those you got from boost in the previous step.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./build.sh -boost_root /path/to/installed-boost-1.88.0
</code></pre></div></div>

<p>For the MPI version:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./build.sh -mpi true
</code></pre></div></div>

<p>This produces an executable called <code class="language-plaintext highlighter-rouge">rb-mpi</code>.</p>

<p>Note that compiling the MPI version requires that an MPI library is installed. If you have root, openmpi can be install with apt or yum. If not, if can be <a href="https://www.open-mpi.org/">downloaded</a> and compiled.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<h3 id="general">General</h3>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">rb: command not found</code></p>

    <p>The problem is that you tried to run RevBayes but your computer doesn’t know where the executable is. The easiest way is to add the directory in which you compiled RevBayes to your system path:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export PATH=&lt;your_revbayes_directory&gt;/projects/cmake:$PATH  
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Error cmake not found!</code></p>

    <p>Please double check that CMake is installed.</p>
  </li>
</ul>

<h3 id="boost">Boost</h3>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Error can't find the libboost_filesystem.so library or Library not loaded: libboost_filesystem.so</code></p>

    <p>You need to add the boost libraries to your path variable. You may find that you have to export this <code class="language-plaintext highlighter-rouge">LD_LIBRARY_PATH</code> every time you open a new terminal window. To get around this, you can add this to your <code class="language-plaintext highlighter-rouge">.bash_profile</code> or <code class="language-plaintext highlighter-rouge">.bashrc</code> file (which lives in your home directory). To change this, open a new terminal window and you should be in the home directory. If you do not have either of these files, use the text editor <code class="language-plaintext highlighter-rouge">nano</code> to create this file type:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd ~
touch .bash_profile
nano .bash_profile
</code></pre></div>    </div>

    <p>Then add the following lines, replacing <code class="language-plaintext highlighter-rouge">/root</code> with wherever you put the boost libraries:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export LD_LIBRARY_PATH=/root/boost_1_88_0/stage/lib:$LD_LIBRARY_PATH
</code></pre></div>    </div>

    <p>Then save the file using ctrl^o and hit return, then exit using ctrl^x. Now quit the Terminal app and reopen it and the boost libraries will forever be in your path.</p>
  </li>
</ul>

<h3 id="mpi">MPI</h3>

<ul>
  <li>
    <p><strong>I am using MPI RevBayes and receiving an ORTE transport error</strong></p>

    <p>This typically occurs if the version of MPI that is in your environment is not the same as the one you used to compile RevBayes. For example, if you compiled RevBayes
  with OpenMPI, but later installed Anaconda Python, which installs a Python MPI. If you receive this error, you might consider removing alternative MPI versions from your system path while running RevBayes. You can check which version of MPI you are using with the command <code class="language-plaintext highlighter-rouge">mpirun --version.</code> Note that you may want to remove the build directory before restarting your build.</p>
  </li>
</ul>

      </div>
      <br>
<footer>
  <div class="container">
  <div class="row">
    <div class="col-sm-12" align="center">
      <a href="https://github.com/revbayes">GitHub</a> | <a href="/license">License</a> | <a href="/citation">Citation</a> | <a href="https://groups.google.com/forum/#!forum/revbayes-users">Users Forum</a>
    </div>
  </div>
  <br>
  </div>
</footer>

    </div>
    <script src="/assets/js/vendor/jquery.min.js"></script>
<script src="/assets/js/vendor/FileSaver.min.js"></script>
<script src="/assets/js/vendor/jszip.min.js"></script>
<script src="/assets/js/vendor/bootstrap.min.js"></script>

<script type="text/javascript">
// Add default language
$(":not(code).highlighter-rouge").each(function() {
  
  if( this.classList == "highlighter-rouge") {
    this.classList = "bash highlighter-rouge";
  }
  
});
// $("code.highlighter-rouge").each(function() {
//   
//   if( this.classList == "highlighter-rouge") {
//       this.classList = "bash highlighter-rouge";
//   }
//   
// });
</script>
<script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      processEscapes: true
    }
    });
    MathJax.Hub.Queue(function () {
      $(".aside").each(function() {
          $("div .MathJax", this).hide();
      });
    });
</script>
<script src="/assets/js/base.js"></script>

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0Y03X9Q2TJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0Y03X9Q2TJ');
</script>

  </body>
</html>
