<!doctype html>
<html lang="en">
<link rel="icon" type="image/png" href="/assets/img/favicon.png" >
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="search-domain" value="https://revbayes.github.io/">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/syntax.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css" />
    <title>RevBayes: Setting up Eclipse for RevBayes development</title>
  </head>
  <body>
    <div class="container">
      <nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <a href="/" class="pull-left">
        
        <img class="navbar-logo" src="/assets/img/aquabayes-desaturated.png" alt="RevBayes Home" />
        
      </a>
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar" align="right"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li><a href="/software">Software</a></li>
        <li><a href="/tutorials/">Tutorials</a></li>
        <li><a href="/workshops/">Workshops</a></li>
        <li><a href="/developer/">Developer</a></li>
      </ul>
      <!-- <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form> -->
    </div>
  </div>
</nav>

      <div class="titlebar">
	<h1 class="maintitle">Setting up Eclipse for RevBayes development</h1>
	
	<h4 class="authors"></h4>
  <h5>Last modified on March 11, 2018</h5>
</div>

<p>Eclipse is a Java-based, cross-platform IDE with lots of nice features that make it convenient for RevBayes development. First, it’s cross-platform, and unlike Xcode, you can use any compiler you like (not just <code class="highlighter-rouge">clang</code>).</p>

<h2 id="prerequisites">Prerequisites</h2>
<ul>
  <li>To compile RevBayes using Eclipse, you must install <a href="https://cmake.org/install/">CMake</a> and its <a href="https://stackoverflow.com/questions/30668601/installing-cmake-command-line-tools-on-a-mac">command line tools</a>. This is very easy if you have <a href="https://brew.sh/">homebrew</a> installed (<code class="highlighter-rouge">brew install cmake</code>)</li>
  <li>You must also have a C++ compiler. If you are using a Mac, you can use <code class="highlighter-rouge">clang</code> (included with <a href="https://developer.apple.com/xcode/">XCode</a>), or you can install <a href="https://gcc.gnu.org/"><code class="highlighter-rouge">gcc</code></a> (e.g. via homebrew <code class="highlighter-rouge">brew install gcc</code>).</li>
</ul>

<h2 id="installing-eclipse-cdt">Installing Eclipse CDT</h2>
<p>To start writing C++ in Eclipse, you must obtain the Eclipse CDT (C/C++ Development Tooling) package. You can download a distribution of Eclipse that comes prepackaged with CDT from the <a href="https://cmake.org/download/">CDT Downloads page</a>.</p>

<p>If you already have Eclipse installed you can go to <em>Help &gt; Install New Software…</em> and enter the p2 repository URL for your version of eclipse found on the CDT downloads page. Then check the <em>Main Features</em> box, click <em>Next</em> twice, accept the User Agreement, and restart Eclipse.</p>

<blockquote>
  <p><strong>Important!</strong> When you first open Eclipse, you will be asked to choose a location for your workspace. Make sure to choose a location that is not inside the source directory of your project!</p>
</blockquote>

<h2 id="create-an-eclipse-project-for-revbayes">Create an Eclipse project for RevBayes</h2>
<p>Assuming you have cloned the RevBayes github repository into the directory <code class="highlighter-rouge">&lt;revbayes-repo&gt;</code>, you can create a new C++ Eclipse project as follows:</p>

<ol>
  <li>In Eclipse, go to <em>File &gt; New &gt; Makefile Project with Existing Code</em></li>
  <li>Set the <em>Name</em> of the project to <code class="highlighter-rouge">revbayes</code></li>
  <li>Select <code class="highlighter-rouge">&lt;revbayes-repo&gt;/src</code> as the <em>Existing Code Location</em></li>
  <li>Select <code class="highlighter-rouge">Cross GCC</code> in <em>Toolchain for Indexer Settings</em> (you can change this later if you want).</li>
  <li>Click Finish</li>
</ol>

<h2 id="configure-the-revbayes-project">Configure the RevBayes project</h2>
<p>You will need to configure your Eclipse project so it correctly compiles the revbayes CMake project.</p>

<h3 id="configure-the-path-environment-variable">Configure the PATH environment variable</h3>
<p>If you installed the CMake command line tools in the default location <code class="highlighter-rouge">/usr/local/bin</code>, you must add it to the PATH environment variable of your Eclipse project.</p>

<ol>
  <li>
    <p>In the <em>Project Explorer</em> view, highlight your revbayes project directory
<img src="figures/eclipse-explorer.png" width="50%" /></p>
  </li>
  <li>Go to <em>Project &gt; Properties</em>, or right click on the project name and select <em>Properties</em>.</li>
  <li>Expand <em>C/C++ Build</em> and click on <em>Environment</em></li>
  <li>Click on the PATH entry, click <em>Edit…</em> and add <code class="highlighter-rouge">/usr/local/bin</code> to the end of the <em>Value</em>
<img src="figures/eclipse-path.png" alt="eclipse-path" title="PATH Configuration" /></li>
</ol>

<h3 id="configure-the-cc-build-settings">Configure the C/C++ build settings</h3>
<p>The RevBayes CMake project uses a special build script <code class="highlighter-rouge">build.sh</code> to build the RevBayes executable. You must tell your Eclipse project to use this script as a build command.</p>

<ol>
  <li>Click on <em>C/C++ Build</em></li>
  <li>Uncheck <em>Use default build command</em> and in <em>Build command</em>, enter <code class="highlighter-rouge">sh build.sh</code></li>
  <li>In <em>Build directory</em>, add <code class="highlighter-rouge">../projects/cmake</code> to the directory path
<img src="figures/eclipse-build.png" alt="eclipse-build" title="C/C++ Build Configuration" /></li>
  <li>Click on the <em>Behavior</em> tab</li>
  <li>In <em>Build (incremental build)</em>, enter <code class="highlighter-rouge">-boost false</code>
<img src="figures/eclipse-behavior.png" alt="eclipse-behavior" title="C/C++ Build Behavior" /></li>
  <li>Again, click on <em>C/C++ Build</em></li>
  <li>Click <em>Manage Configurations</em></li>
  <li>Click on <em>New…</em> to create a new configuration, and name it <em>Debug</em>
<img src="figures/eclipse-config.png" width="75%" /></li>
  <li>
    <p>Configure the Debug configuration by adding <code class="highlighter-rouge">-debug true</code> to the <em>Build (incremental build)</em> options
<img src="figures/eclipse-debug.png" alt="eclipse-debug" title="C/C++ Debug Configuration" />
Now, if you set the active configuration to <em>Debug</em>, RevBayes will be compiled with debugger symbols that can be loaded by <code class="highlighter-rouge">lldb</code> or <code class="highlighter-rouge">gdb</code>. You can also set the active build configuration by going to <em>Project &gt; Build Configurations &gt; Set Active</em></p>
  </li>
  <li>Click <em>Apply and Close</em></li>
</ol>

<p>At this point, C/C++ Indexer will get to work indexing the RevBayes code, during which time Eclipse might appear to be unresponsive.</p>

<h3 id="configure-the-project-to-use-spaces-instead-of-tabs">Configure the project to use spaces instead of tabs</h3>

<p>RevBayes code is indented using spaces. However, by default Eclipse uses tabs. Configure your project to automatically insert 4 spaces when you press the Tab key.</p>

<ol>
  <li>Open <em>Eclipse &gt; Preferences</em></li>
  <li>Expand <em>C/C++ &gt; Code Style</em></li>
  <li>Click on <em>Formatter</em></li>
  <li>Click the <em>New…</em> button to create a new profile, name the profile (e.g. <em>“spaces”</em>) then click <em>OK</em> to continue</li>
  <li>Click the <em>Indentation</em> tab</li>
  <li>Under <em>General Settings</em> set <em>Tab Policy</em> to <code class="highlighter-rouge">Spaces only</code></li>
  <li>Click <em>OK</em> and <em>Apply and Close</em></li>
</ol>

<h2 id="build-the-revbayes-project">Build the RevBayes project</h2>
<p>The first time you build RevBayes, you will also need to build the included Boost libraries. You only need to do this once. To build the boost libraries, return to step 5 in the <a href="#configure-the-cc-build-settings">build configuration section</a> and enter <code class="highlighter-rouge">-boost true</code> instead. Then after you’ve built the libraries, you can disable the Boost build flag by resetting <code class="highlighter-rouge">-boost false</code>.</p>

<p>With all the build settings correctly configured, you can build RevBayes by highlighting the project in the <em>Project Explorer</em> view, and then going to <em>Project &gt; Build Project</em>. You can also right click on the project directory and select <em>Build Project</em>.</p>

<p>The <em>Console</em> view should display the progress of the compilation process.</p>

<p>You’re done! Now you can find the <code class="highlighter-rouge">rb</code> executable in the <code class="highlighter-rouge">&lt;revbayes-repo&gt;/projects/cmake</code> directory.</p>

<h2 id="tips">Tips</h2>
<ul>
  <li>
    <p>Create a symlink of <code class="highlighter-rouge">rb</code> in your PATH, so it is automatically updated every time you build RevBayes. e.g.</p>

    <p><code class="highlighter-rouge">sudo ln -s &lt;revbayes-repo&gt;/projects/cmake/rb /usr/local/bin/rb</code></p>
  </li>
  <li>
    <p>If your <em>Project Explorer</em> or <em>Console</em> views disappear and you can’t find them, go to <em>Window &gt; Show View</em> to display various views.</p>
  </li>
</ul>

<ol class="bibliography"></ol>

<script type="text/javascript">
var _ol = document.querySelectorAll('ol');
for (var i = 0, elem_ol; elem_ol = _ol[i]; i++) {
	if ( elem_ol.classList == "bibliography" ) {
		var _li = elem_ol.getElementsByTagName("li");
		//for (var j = 0, elem_li; elem_li = _li[j]; j++)
		//{
		//	elem_li.innerHTML = elem_li.innerHTML.replace(/(https?:\/\/)([^\s<]+)/,"<a href=\"$1$2\">$2");
		//}
		if(_li.length > 0)
			elem_ol.outerHTML = "<h2 class='references'>References</h2><hr class='references'>"+elem_ol.outerHTML
	}
}
</script>
      <br>
<footer>
  <div class="container">
  <div class="row">
    <div class="col-sm-12" align="center">
      <a href="https://github.com/revbayes">GitHub</a> | <a href="/license">License</a> | <a href="/citation">Citation</a> | <a href="https://groups.google.com/forum/#!forum/revbayes-users">Users Forum</a>
    </div>
  </div>
  <br>
  </div>
</footer>

    </div>
    <script src="/assets/js/vendor/jquery.min.js"></script>
<script src="/assets/js/vendor/FileSaver.min.js"></script>
<script src="/assets/js/vendor/jszip.min.js"></script>
<script src="/assets/js/vendor/bootstrap.min.js"></script>

<script type="text/javascript">
// Add default language
$(":not(code).highlighter-rouge").each(function() {
  
  if( this.classList == "highlighter-rouge") {
    this.classList = "default highlighter-rouge";
  }
  
});
// $("code.highlighter-rouge").each(function() {
//   
//   if( this.classList == "highlighter-rouge") {
//       this.classList = "default highlighter-rouge";
//   }
//   
// });
</script>

<script src="/assets/js/base.js"></script>

<script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      processEscapes: true
    }
  });
</script>

  </body>
</html>
