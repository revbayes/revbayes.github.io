<!doctype html>
<html lang="en">
<link rel="icon" type="image/png" href="/assets/img/favicon.png" >
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="search-domain" value="https://revbayes.github.io/">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/syntax.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css" />
    <title>RevBayes: Setting up XCode for RevBayes development</title>
  </head>
  <body>
    <div class="container">
      <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <a href="/" class="pull-left">
        
        <img class="navbar-logo" src="/assets/img/aquabayes-desaturated.png" alt="RevBayes Home" />
        
      </a>

      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar" align="right"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li><a href="/download">Download</a></li>
        <li><a href="/tutorials/">Tutorials</a></li>
        <li><a href="/documentation/">Documentation</a></li>
        <li><a href="/interfaces">Interfaces</a></li>
        <li><a href="/workshops/">Workshops</a></li>
        <li><a href="/jobs/">Jobs</a></li>
        <li><a href="/developer/">Developer</a></li>
        <li><class="header-search">
  <form class="header-search-form" action="/search.html" method="get">
    <input type="text" id="search-box-nav" placeholder="Search..." name="query" style="border-color:black;background-color:white;height:32px;">
    <button type="submit" style="color:black; border-color:black;width:32px;height:32px;padding-top:4px">
        <img src="https://revbayes.github.io/assets/img/search.png" height="22px" width="28px"/>
    </button>
  </form>
</div>

</li>
      </ul>
      <!-- <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form> -->
    </div>
  </div>
</nav>

      <!-- adds margin to main content -->
      <div class="container" style="padding-left:20px padding-right:20px;">
          <div class="titlebar">
	<h1 class="maintitle">Setting up XCode for RevBayes development</h1>
	
	<h4 class="authors"></h4>
  <h5>Last modified on July 11, 2024</h5>
</div>

<p>XCode is an IDE for Mac OSX. XCode does not keep track of files, so each time you open your RevBayes project in Xcode you must pull the RevBayes master branch from git &amp; remove reference to all of the source. Eclipse Oxygen does a cleaner job of managing the files; you do not need to pull from git each time you work in it.</p>

<h2 id="set-up-the-xcode-project-with-an-internal-build-system">Set up the XCode Project with an internal build system</h2>

<ol>
  <li>Open Xcode and in the <em>Welcome to Xcode</em> window, choose <strong>Create a new Xcode project</strong>.</li>
  <li>Select <strong>Command Line Tool</strong> and name it <code class="language-plaintext highlighter-rouge">rb</code> and click <strong>Next</strong>. <img src="figures/xcode-making_xcode_project.png" alt="" /></li>
  <li>Click <strong>New Folder</strong>  to create an empty directory and name it whatever you’d like.</li>
  <li>Click <strong>Create</strong>.</li>
  <li>Delete all of the files and folders in each of the directories including <code class="language-plaintext highlighter-rouge">main.cpp</code> so that RevBayes is empty. You can do this by selecting the folders and files, right clicking and selecting delete. When asked, choose <strong>Move to Trash</strong>.</li>
  <li>Add the source files by selecting the appropriate directory and going to the <strong>File</strong> pull-down menu and selecting <strong>Add Files to rb</strong>.</li>
  <li>Click on <strong>Options</strong> at the button of the window, and under the <strong><em>Added Folders</em></strong> heading, select the <strong>Create Groups</strong> radio button.
    <ul>
      <li>Select the
        <ul>
          <li><code class="language-plaintext highlighter-rouge">revbayes/src/revlanguage</code></li>
          <li><code class="language-plaintext highlighter-rouge">revbayes/src/core</code></li>
          <li><code class="language-plaintext highlighter-rouge">revbayes/src/libs</code></li>
        </ul>
      </li>
      <li>directories and click <strong>Add</strong>.
<img src="figures/xcode-adding_files.png" alt="" /></li>
      <li><em>Note:</em> On some versions of XCode, you may need to click on the “Options” Tab, and choose “Create Groups” for the import to work properly. This is the default behavior on most XCode installs.</li>
    </ul>
  </li>
  <li>Add the boost library to your Xcode project:
    <ul>
      <li>You have to install boost from another source and point your Xcode project to that version. If you use Homebrew as a package management system on your Mac, you can install boost using <code class="language-plaintext highlighter-rouge">brew install boost</code>. This will install the boost libraries in your <code class="language-plaintext highlighter-rouge">/usr/local</code> directory. To enable this version in your Xcode project, scroll to the <strong>Search Paths</strong> section in the <strong>Build Settings</strong> and add the following paths:
        <ul>
          <li><strong>Header Search Paths</strong>: <code class="language-plaintext highlighter-rouge">/usr/local/include</code></li>
          <li><strong>Library Search Paths</strong>: <code class="language-plaintext highlighter-rouge">/usr/local/lib</code>
<img src="figures/xcode-search-paths.png" alt="" /></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Add boost linker flags
    <ul>
      <li>Scroll to the <strong>Linking</strong> section in the <strong>Build Settings</strong></li>
      <li>Go to <strong>Other Linker Flags</strong> and double click on the space. This will bring up a box where you can add the following flags: <code class="language-plaintext highlighter-rouge">-lboost_program_options</code>, <code class="language-plaintext highlighter-rouge">-lboost_filesystem</code>, <code class="language-plaintext highlighter-rouge">-lboost_system</code>.
<img src="figures/xcode-linking.png" alt="" /></li>
    </ul>
  </li>
</ol>

<h3 id="add-the-rb_xcode-preprocessor-macro-to-your-xcode-project">Add the <code class="language-plaintext highlighter-rouge">RB_XCODE</code> Preprocessor Macro to your Xcode project</h3>

<ol>
  <li>Select the RevBayes project and go to the <strong>Build Settings</strong>.</li>
  <li>Search for or Scroll down to the <strong>Apple Clang - Preprocessing</strong> heading and find the sub-heading named <strong>Preprocessor Macros</strong>.</li>
  <li>Double click on right hand column, click on the <strong>+</strong> and enter <code class="language-plaintext highlighter-rouge">RB_XCODE</code>. Do not replace the debug flag that is already present.
<img src="figures/xcode-macro.png" alt="" /></li>
</ol>

<h3 id="check-c-language-options">Check C++ language options</h3>

<ol>
  <li>Select the RevBayes project and go to the <strong>Build Settings</strong>.</li>
  <li>Search or scroll to: <strong>Apple Clang - Language - C++</strong>.</li>
  <li>Make sure C++ Language Dialect is set to <strong>GNU++17 [-std=gnu++17]</strong>.
<img src="figures/xcode-cpp_lang_options.png" alt="" /></li>
</ol>

<p>At this point, if everything has been setup correctly, you should be able to build the project. You can try by clicking on <strong>Product - Build</strong> or by using <strong>⌘+B</strong>.</p>

<h2 id="set-up-the-xcode-project-with-an-external-build-system">Set up the XCode Project with an external build system</h2>

<h3 id="prerequisites">Prerequisites</h3>

<ul>
  <li>To compile RevBayes using Xcode, first install <a href="CMake">https://cmake.org/</a> and its <a href="command line tools">https://stackoverflow.com/questions/30668601/installing-cmake-command-line-tools-on-a-mac</a>. This is easily done using <a href="homebrew">https://brew.sh/</a> by running <code class="language-plaintext highlighter-rouge">brew install cmake</code> in terminal.</li>
</ul>

<h3 id="create-an-xcode-project-for-revbayes">Create an Xcode project for RevBayes</h3>

<ol>
  <li>Open Xcode and in the <em>Welcome to Xcode</em> window, choose <strong>Create a new Xcode project</strong>.</li>
  <li>Click on the Cross-Platform tab at the top</li>
  <li>Select <strong>External Build System</strong> and name it rb (or whatever you’d like)</li>
  <li>Under <strong>Build Tool</strong> type the following directory <code class="language-plaintext highlighter-rouge">/&lt;path-to-revbayes&gt;/revbayes/projects/cmake/build.sh</code></li>
  <li>Click <strong>Next</strong>.</li>
</ol>

<h3 id="configure-the-build">Configure the build</h3>

<ol>
  <li>After clicking <strong>Next</strong> as directed above, you should see a screen that looks like this:
<img src="figures/xcode-info.png" alt="" /></li>
  <li>On this screen, under <strong>Arguments</strong> type <code class="language-plaintext highlighter-rouge">$(ACTION) -boost true -debug true</code>, or if you haven’t built the boost libraries in RevBayes already. If you have then type <code class="language-plaintext highlighter-rouge">$(ACTION) -boost false -debug true</code>.</li>
  <li>Under <strong>Directory</strong> put <code class="language-plaintext highlighter-rouge">/&lt;path-to-revbayes&gt;/revbayes/projects/cmake/</code>.</li>
  <li>Add the source files by selecting the appropriate directory and going to the <strong>File</strong> pull-down menu and selecting **Add Files to <xcode-rb-project-name>**.</xcode-rb-project-name></li>
  <li>This should open a screen that looks like this:
<img src="figures/xcode-adding.png" alt="" /></li>
  <li>Click on <strong>Options</strong> at the button of the window, and under the <strong><em>Added Folders</em></strong> heading, select <strong>Create as Folder References</strong>, and add to the target that was created in Step 2.
    <ul>
      <li>Select the following directories from the <code class="language-plaintext highlighter-rouge">revbayes</code> directory:
        <ul>
          <li><code class="language-plaintext highlighter-rouge">revbayes/src/revlanguage</code></li>
          <li><code class="language-plaintext highlighter-rouge">revbayes/src/core</code></li>
          <li><code class="language-plaintext highlighter-rouge">revbayes/src/libs</code></li>
        </ul>
      </li>
      <li>Click <strong>Add</strong>.</li>
    </ul>
  </li>
  <li>At this point, if everything has been setup correctly, you should be able to build the project. You can try by clicking on <strong>Product - Build</strong> or by using <strong>⌘+B</strong>.</li>
  <li>Once revbayes has built go to <strong>Product-&gt;Scheme-&gt;Edit Scheme</strong>, it should bring a window like this:
<img src="figures/xcode-exe.png" alt="" /></li>
  <li>Click on info, then go to executable and locate the newly built revbayes executable.</li>
  <li>Now you should be able to click the play button or <strong>⌘+R</strong>, and you should see the revbayes command line prompt in the loading screen.</li>
</ol>

<ol class="bibliography"></ol>

<script type="text/javascript">
var _ol = document.querySelectorAll('ol');
for (var i = 0, elem_ol; elem_ol = _ol[i]; i++) {
	if ( elem_ol.classList == "bibliography" ) {
		var _li = elem_ol.getElementsByTagName("li");
		//for (var j = 0, elem_li; elem_li = _li[j]; j++)
		//{
		//	elem_li.innerHTML = elem_li.innerHTML.replace(/(https?:\/\/)([^\s<]+)/,"<a href=\"$1$2\">$2");
		//}
		if(_li.length > 0)
			elem_ol.outerHTML = "<h2 class='references'>References</h2><hr class='references'>"+elem_ol.outerHTML
	}
}
</script>
      </div>
      <br>
<footer>
  <div class="container">
  <div class="row">
    <div class="col-sm-12" align="center">
      <a href="https://github.com/revbayes">GitHub</a> | <a href="/license">License</a> | <a href="/citation">Citation</a> | <a href="https://groups.google.com/forum/#!forum/revbayes-users">Users Forum</a>
    </div>
  </div>
  <br>
  </div>
</footer>

    </div>
    <script src="/assets/js/vendor/jquery.min.js"></script>
<script src="/assets/js/vendor/FileSaver.min.js"></script>
<script src="/assets/js/vendor/jszip.min.js"></script>
<script src="/assets/js/vendor/bootstrap.min.js"></script>

<script type="text/javascript">
// Add default language
$(":not(code).highlighter-rouge").each(function() {
  
  if( this.classList == "highlighter-rouge") {
    this.classList = "default highlighter-rouge";
  }
  
});
// $("code.highlighter-rouge").each(function() {
//   
//   if( this.classList == "highlighter-rouge") {
//       this.classList = "default highlighter-rouge";
//   }
//   
// });
</script>
<script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      processEscapes: true
    }
    });
    MathJax.Hub.Queue(function () {
      $(".aside").each(function() {
          $("div .MathJax", this).hide();
      });
    });
</script>
<script src="/assets/js/base.js"></script>

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0Y03X9Q2TJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0Y03X9Q2TJ');
</script>

  </body>
</html>
