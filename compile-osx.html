<!doctype html>
<html lang="en">
<link rel="icon" type="image/png" href="/assets/img/favicon.png" >
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="search-domain" value="https://revbayes.github.io/">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/syntax.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css" />
    <title>RevBayes: Compile on Mac OS X</title>
  </head>
  <body>
    <div class="container">
      <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <a href="/" class="pull-left">
        
        <img class="navbar-logo" src="/assets/img/aquabayes-desaturated.png" alt="RevBayes Home" />
        
      </a>
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar" align="right"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li><a href="/download">Download</a></li>
        <li><a href="/tutorials/">Tutorials</a></li>
        <li><a href="/documentation/">Documentation</a></li>
        <li><a href="https://revbayes.github.io/revscripter/">RevScripter</a></li>
        <li><a href="/workshops/">Workshops</a></li>
        <li><a href="/jobs/">Jobs</a></li>
        <li><a href="/developer/">Developer</a></li>
        <li><a href="/home/gui.html">GUI</a></li>
      </ul>
      <!-- <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form> -->
    </div>
  </div>
</nav>

      <h1 class="maintitle">

Compile on Mac OS X

</h1>
<hr>

<p><strong>NOTE: These instructions are for compiling the development branch.</strong></p>

<p>The standard way to build revbayes is to use <code class="language-plaintext highlighter-rouge">cmake</code>.  If you want to compile using <code class="language-plaintext highlighter-rouge">meson</code>, see <a href="https://github.com/revbayes/revbayes/blob/development/projects/meson/README.md">revbayes/projects/meson/README.md</a>.</p>

<h2 id="pre-requisites">Pre-requisites</h2>

<p>You will need to have C++ compiler installed on your computer. GCC 6 (or higher) and Apple Clang from XCode 11 (or higher) should work. If you don’t have a C++ compiler, you should install Xcode.</p>

<p>You will also need to have CMake (3.5.1 or higher) and Boost (1.74 or higher) installed</p>

<h3 id="installing-pre-requisites-with-rootadministrator-priveleges-the-usual-case">Installing pre-requisites <em>with</em> root/administrator priveleges (the usual case)</h3>

<p>The typical way to install <code class="language-plaintext highlighter-rouge">boost</code> and <code class="language-plaintext highlighter-rouge">cmake</code> is to use the <a href="https://brew.sh/">homebrew</a> package manager.
If homebrew is not already installed, you can install it with:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
</code></pre></div></div>

<p>You can then use homebrew to install cmake and boost:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew install cmake boost
</code></pre></div></div>

<h3 id="installing-pre-requisites-without-rootadministrator-priveleges">Installing pre-requisites <em>without</em> root/administrator priveleges</h3>

<p>First you will need to <a href="https://cmake.org/install/">install cmake</a></p>

<p>Then you can compile boost:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -O -L https://boostorg.jfrog.io/artifactory/main/release/1.74.0/source/boost_1_74_0.tar.gz
tar -xzvf boost_1_74_0.tar.gz
cd boost_1_74_0
./bootstrap.sh --with-libraries=atomic,chrono,filesystem,system,regex,thread,date_time,program_options,math,serialization
./b2 link=static
</code></pre></div></div>

<p>When it is done, something like the following will be printed. You will need these paths for the next step.</p>

<blockquote>
  <p>The following directory should be added to compiler include paths:</p>

  <p>/root/boost_1_74_0</p>

  <p>The following directory should be added to linker library paths:</p>

  <p>/root/boost_1_74_0/stage/lib</p>
</blockquote>

<h2 id="compile">Compile</h2>

<p>Download RevBayes from our github repository. Clone the repository using git by running the following command in the terminal</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone --branch development https://github.com/revbayes/revbayes.git revbayes
</code></pre></div></div>

<p>To compile with the system Boost library:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd revbayes/projects/cmake
./build.sh
</code></pre></div></div>

<p>You will likely see some compiler warnings (e.g. <code class="language-plaintext highlighter-rouge">clang: warning: optimization flag '-finline-functions' is not supported</code>). This is normal.</p>

<p>To compile revbayes using a locally compiled boost, do the following. Be sure to replace the paths in the build command with those you got from boost in the previous step.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./build.sh -boost_root /root/boost_1_74_0 -boost_lib /root/boost_1_74_0/stage/lib
</code></pre></div></div>

<p>For the MPI version:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./build.sh -mpi true
</code></pre></div></div>

<p>This produces an executable called <code class="language-plaintext highlighter-rouge">rb-mpi</code>.</p>

<p>Note that compiling the MPI version requires that an MPI library is installed.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<h3 id="general">General</h3>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">rb: command not found</code></p>

    <p>The problem is that you tried to run RevBayes but your computer doesn’t know where the executable is. The easiest way is to add the directory in which you compiled RevBayes to your system path:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export PATH=&lt;your_revbayes_directory&gt;/projects/cmake:$PATH  
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Error cmake not found!</code></p>

    <p>Please double check that CMake is installed. For OS X, go to step 2 above.</p>
  </li>
</ul>

<h3 id="boost">Boost</h3>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Error can't find the libboost_filesystem.dylib library or Library not   loaded: libboost_filesystem.dylib</code></p>

    <p>You need to add the boost libraries to your path variable. You may find that you have to export this <code class="language-plaintext highlighter-rouge">DYLD_LIBRARY_PATH</code> every time you open a new terminal window. To get around this, you can add this to your <code class="language-plaintext highlighter-rouge">.bash_profile</code> or <code class="language-plaintext highlighter-rouge">.bashrc</code> file (which lives in your home directory). To change this, open a new terminal window and you should be in the home directory. If you do not have either of these files, use the text editor <code class="language-plaintext highlighter-rouge">nano</code> to create this file type:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd ~
touch .bash_profile
nano .bash_profile
</code></pre></div>    </div>

    <p>Then add the following lines, replacing <code class="language-plaintext highlighter-rouge">/root</code> with wherever you put the boost libraries:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export DYLD_LIBRARY_PATH=/root/boost_1_74_0/stage/lib:$DYLD_LIBRARY_PATH
</code></pre></div>    </div>

    <p>Then save the file using ctrl^o and hit return, then exit using ctrl^x. Now quit the Terminal app and reopen it and the boost libraries will forever be in your path.</p>
  </li>
</ul>

      <br>
<footer>
  <div class="container">
  <div class="row">
    <div class="col-sm-12" align="center">
      <a href="https://github.com/revbayes">GitHub</a> | <a href="/license">License</a> | <a href="/citation">Citation</a> | <a href="https://groups.google.com/forum/#!forum/revbayes-users">Users Forum</a>
    </div>
  </div>
  <br>
  </div>
</footer>

    </div>
    <script src="/assets/js/vendor/jquery.min.js"></script>
<script src="/assets/js/vendor/FileSaver.min.js"></script>
<script src="/assets/js/vendor/jszip.min.js"></script>
<script src="/assets/js/vendor/bootstrap.min.js"></script>

<script type="text/javascript">
// Add default language
$(":not(code).highlighter-rouge").each(function() {
  
  if( this.classList == "highlighter-rouge") {
    this.classList = "bash highlighter-rouge";
  }
  
});
// $("code.highlighter-rouge").each(function() {
//   
//   if( this.classList == "highlighter-rouge") {
//       this.classList = "bash highlighter-rouge";
//   }
//   
// });
</script>
<script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      processEscapes: true
    }
    });
    MathJax.Hub.Queue(function () {
      $(".aside").each(function() {
          $("div .MathJax", this).hide();
      });
    });
</script>
<script src="/assets/js/base.js"></script>

  </body>
</html>
