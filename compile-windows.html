<!doctype html>
<html lang="en">
<link rel="icon" type="image/png" href="/assets/img/favicon.png" >
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="search-domain" value="https://revbayes.github.io/">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/syntax.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css" />
    <title>RevBayes: Compile on Windows</title>
  </head>
  <body>
    <div class="container">
      <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <a href="/" class="pull-left">
        
        <img class="navbar-logo" src="/assets/img/aquabayes-desaturated.png" alt="RevBayes Home" />
        
      </a>

      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar" align="right"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li><a href="/download">Download</a></li>
        <li><a href="/tutorials/">Tutorials</a></li>
        <li><a href="/documentation/">Documentation</a></li>
        <li><a href="/interfaces">Interfaces</a></li>
        <li><a href="/workshops/">Workshops</a></li>
        <li><a href="/jobs/">Jobs</a></li>
        <li><a href="/developer/">Developer</a></li>
        <li><class="header-search">
  <form class="header-search-form" action="/search.html" method="get">
    <input type="text" id="search-box-nav" placeholder="Search..." name="query" style="border-color:black;background-color:white;height:32px;">
    <button type="submit" style="color:black; border-color:black;width:32px;height:32px;padding-top:4px">
        <img src="assets/img/search.png" height="22px" width="28px"/>
    </button>
  </form>
</div>

</li>
      </ul>
      <!-- <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form> -->
    </div>
  </div>
</nav>

      <h1 class="maintitle">

Compile on Windows

</h1>
<hr>

<p><strong>NOTE: These instructions are for compiling the development branch.</strong></p>

<p><strong>NOTE: Boost now needs to be at least version 1.71.</strong></p>

<p>You can also <a href="https://github.com/revbayes/revbayes/blob/development/projects/meson/README.md">compile with meson</a> instead of cmake.  Meson allows using linux to generate windows binaries (“cross-compiling”).</p>

<ol>
  <li>
    <p>Download and install 64-bit cygwin (setup-x86_64.exe). Make sure you include the following packages:</p>

    <p>(Cygwin package versions are from May 2022. Newer versions may work, but see special version notes below.  As of July 2024, RevBayes requires cmake 3.5.1 and Boost 1.71.)</p>

    <table>
      <thead>
        <tr>
          <th>package</th>
          <th>version</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>cmake</td>
          <td>3.14.5-1</td>
        </tr>
        <tr>
          <td>cmake-debuginfo</td>
          <td>3.14.5-1</td>
        </tr>
        <tr>
          <td>cmake-doc</td>
          <td>3.14.5-1</td>
        </tr>
        <tr>
          <td>cmake-gui</td>
          <td>3.14.5-1</td>
        </tr>
        <tr>
          <td>git</td>
          <td>2.21.0-1</td>
        </tr>
        <tr>
          <td>make</td>
          <td>4.3-1</td>
        </tr>
        <tr>
          <td>mingw64-x86_64-boost</td>
          <td>1.66.0-1</td>
        </tr>
        <tr>
          <td>mingw64-x86_64-gcc-core</td>
          <td>9.2.0-2</td>
        </tr>
        <tr>
          <td>mingw64-x86_64-gcc-g++</td>
          <td>9.2.0-2</td>
        </tr>
      </tbody>
    </table>

    <p>For RevStudio you will also need:</p>

    <table>
      <thead>
        <tr>
          <th>package</th>
          <th>version</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>mingw64-x86_64-atk1.0</td>
          <td>2.26.1-1</td>
        </tr>
        <tr>
          <td>mingw64-x86_64-bzip2</td>
          <td>1.0.6-4</td>
        </tr>
        <tr>
          <td>mingw64-x86_64-cairo</td>
          <td>1.14.12-1</td>
        </tr>
        <tr>
          <td>mingw64-x86_64-fribidi</td>
          <td>0.19.7-1</td>
        </tr>
        <tr>
          <td>mingw64-x86_64-gdk-pixbuf2.0</td>
          <td>2.36.11-1</td>
        </tr>
        <tr>
          <td>mingw64-x86_64-glib2.0</td>
          <td>2.54.3-1</td>
        </tr>
        <tr>
          <td>mingw64-x86_64-gtk2.0</td>
          <td>2.24.31-1</td>
        </tr>
        <tr>
          <td>mingw64-x86_64-gtkmm2.4</td>
          <td>2.24.5-1</td>
        </tr>
        <tr>
          <td>mingw64-x86_64-pango1.0</td>
          <td>1.40.14-1</td>
        </tr>
      </tbody>
    </table>

    <p><strong>Notes about the versions:</strong></p>

    <p><strong>Boost and CMake:</strong></p>

    <p>It’s important that the version of Boost that you use be supported by the version of CMake that you use. You can check this by going to the package source for the CMake version you’re using e.g. <a href="https://github.com/Kitware/CMake/blob/v3.14.5/Modules/FindBoost.cmake">3.14.5</a>. Search for <code class="language-plaintext highlighter-rouge">_Boost_KNOWN_VERSIONS</code> and ensure your boost version appears in the list.</p>

    <p>Occasionally, RevBayes may require a version of cmake or Boost that is not available via Cygwin.
 Once you have used Cygwin to install gcc, you can install these separately.</p>

    <p><a href="https://cmake.org/download">cmake</a> has a simple and well-documented installation pathway.</p>

    <p>Configuring <a href="https://www.boost.org/">Boost</a> is less straightforward.</p>

    <ol>
      <li><a href="https://www.boost.org/users/download/">Download Boost</a> and unzip the archive.  In this tutorial, I unzipped v1.82.0 to <code class="language-plaintext highlighter-rouge">c:\boost\boost_1_82_0</code>.  It may be wise not to use the most current version; at time of writing, the latest 1.85 release caused compatibility issues.</li>
      <li>Use Open a cygwin terminal window and <code class="language-plaintext highlighter-rouge">cd</code> to the boost directory, here: <code class="language-plaintext highlighter-rouge">c:/boost/boost_1_82_0</code></li>
      <li>Type <code class="language-plaintext highlighter-rouge">./bootstrap.bat gcc</code> to run the script with the gcc toolset.</li>
      <li>Execute <code class="language-plaintext highlighter-rouge">b2 toolset=gcc-13 address-model=64 architecture=x86 --build-dir=build variant=release --build-type=complete --prefix=c:/boost/boost_1_82_0/gcc --with-regex --with-program_options --with-thread --with-system --with-filesystem --with-date_time --with-serialization  install</code>.
        <ul>
          <li>The <code class="language-plaintext highlighter-rouge">address-model=64 architecture=x86 toolset=gcc-13</code> options are assumed to match the configuration of your system – here, a 64-bit x86 machine – throughout this tutorial.  Use <code class="language-plaintext highlighter-rouge">gcc -v</code> to check which version of gcc you are using and update <code class="language-plaintext highlighter-rouge">gcc-13</code> to match.</li>
        </ul>
      </li>
      <li>Check that installation was successful.  If it was, <code class="language-plaintext highlighter-rouge">C:\boost\boost_1_82_0\gcc\lib\cmake\Boost-1.82.0</code> will contain a file <code class="language-plaintext highlighter-rouge">BoostConfig.cmake</code></li>
    </ol>

    <p>If you see errors, you may need to use a more recent version of b2 than is bundled with Boost:</p>
    <ul>
      <li>Download <a href="https://github.com/bfgroup/b2/releases">b2 5.2.0</a> or above.</li>
      <li>Remove (or rename) the local copy of <code class="language-plaintext highlighter-rouge">b2.exe</code>, so the system uses the updated version installed globally above.</li>
      <li>Run <code class="language-plaintext highlighter-rouge">b2 --version</code> to confirm that a version of b2 &gt;= 5.2 is available.</li>
    </ul>

    <ol>
      <li>Update <code class="language-plaintext highlighter-rouge">&lt;path/to/revbayes&gt;/src/CMakeLists.txt</code> to point to Boost:
   a. After the line <code class="language-plaintext highlighter-rouge">project(RevBayes)</code>, add:
  <code class="language-plaintext highlighter-rouge">set(BOOST_ROOT "C:/boost/boost_1_82_0/gcc")</code> 
  (to match the value specified to b2 in the <code class="language-plaintext highlighter-rouge">prefix</code> argument)
   b. After the  line starting <code class="language-plaintext highlighter-rouge">find_package(Boost</code>, around line 170,
  add <code class="language-plaintext highlighter-rouge">include_directories(${Boost_INCLUDE_DIRS})</code></li>
    </ol>
  </li>
  <li>
    <p>Retrieve the RevBayes sources.</p>

    <ol>
      <li>Open a cygwin terminal window</li>
      <li>Clone the git repository:
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> git clone https://github.com/revbayes/revbayes.git revbayes
</code></pre></div>        </div>
      </li>
    </ol>

    <p>If you have already obtained the source code by another method, 
 navigate to the folder that contains it.  To get to the folder <code class="language-plaintext highlighter-rouge">c:/RevBayes</code>,
 use <code class="language-plaintext highlighter-rouge">cd /cygdrive/c/RevBayes</code>.</p>
  </li>
  <li>
    <p>Compile RevBayes.</p>

    <ol>
      <li>Open a <strong>Cygwin</strong> terminal window (cmd or PowerShell will not work!) and go to the RevBayes source directory
if you haven’t already done so, e.g.,
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> cd revbayes
</code></pre></div>        </div>
      </li>
      <li>Next, go into the projects and then the cmake subdirectory:
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> cd projects/cmake
</code></pre></div>        </div>
      </li>
      <li>Now you can either build the standard version
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> bash build.sh -DCMAKE_TOOLCHAIN_FILE=../mingw64_toolchain.cmake
</code></pre></div>        </div>
        <p>or the RevStudio version</p>
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> bash build.sh -DCMAKE_TOOLCHAIN_FILE=../mingw64_toolchain.cmake -cmd true
</code></pre></div>        </div>
      </li>
    </ol>

    <ul>
      <li>
        <p>If you see the error <code class="language-plaintext highlighter-rouge">build.sh: line ##: $'\r': command not found</code>,
 you need to convert to Unix line endings (<code class="language-plaintext highlighter-rouge">\n</code> rather than Windows <code class="language-plaintext highlighter-rouge">\r\n</code>).
 Open the problematic file – here, (<code class="language-plaintext highlighter-rouge">build.sh</code>) –
 in <a href="https://notepad-plus-plus.org/">Notepad++</a>,
 use the Edit menu→EOL conversion→Unix (LF),
 then save the file.</p>
      </li>
      <li>
        <p>If you installed Boost manually, rather than using the Cygwin package, 
you will need to update <code class="language-plaintext highlighter-rouge">src/CMakeLists.txt</code> to tell cmake where to 
find Boost, as detailed above.</p>
      </li>
      <li>
        <p>If you encounter problems finding specific Boost libraries (e.g. regex),
a common issue is that the boost libraries have been built using a 
different toolkit (e.g. a different version of gcc) to the toolkit being
used to build RevBayes.
It may help to switch from the Cygwin shell to a regular command prompt,
or to use <a href="https://revbayes.github.io/developer/setup/#vscode">VSCode</a>
to build the project.
Add the line <code class="language-plaintext highlighter-rouge">set(Boost_DEBUG ON)</code> to the top of your <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> file
to see the toolset used to build Boost (which may differ, confusingly, from
the filenames of the compiled libraries in <code class="language-plaintext highlighter-rouge">C:\boost\boost_1_82_0\gcc\lib</code>).
This should match the version number reported by <code class="language-plaintext highlighter-rouge">gcc -v</code>.</p>
      </li>
      <li>
        <p>If <code class="language-plaintext highlighter-rouge">cmake</code> cannot find <code class="language-plaintext highlighter-rouge">generated_included_dirs</code>, these were not generated
successfully by <code class="language-plaintext highlighter-rouge">&lt;revbayes&gt;/projects/cmake/regenerate.sh</code>; head to
this folder and run <code class="language-plaintext highlighter-rouge">bash regenerate.sh</code>.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Library whack-a-mole</p>

    <p>When you try to run the executable you will likely get an error about missing libraries.</p>

    <p>Make a new directory and put the executable in it.</p>

    <p>Then find the library from the error message in <code class="language-plaintext highlighter-rouge">/usr/x86_64-w64-mingw32/sys-root/mingw/bin/</code> and copy it to the directory you put the exectuable in. Repeat this until you stop getting error messages.</p>

    <p>At the time this was written (RevBayes v1.1.0), this consisted of:</p>

    <ul>
      <li>iconv.dll</li>
      <li>libatk-1.0-0.dll</li>
      <li>libboost_filesystem-mt.dll</li>
      <li>libboost_program_options-mt.dll</li>
      <li>libboost_system-mt.dll</li>
      <li>libbz2-1.dll</li>
      <li>libcairo-2.dll</li>
      <li>libexpat-1.dll</li>
      <li>libffi-6.dll</li>
      <li>libfontconfig-1.dll</li>
      <li>libfreetype-6.dll</li>
      <li>libgcc_s_seh-1.dll</li>
      <li>libgdk_pixbuf-2.0-0.dll</li>
      <li>libgdk-win32-2.0-0.dll</li>
      <li>libgio-2.0-0.dll</li>
      <li>libglib-2.0-0.dll</li>
      <li>libgmodule-2.0-0.dll</li>
      <li>libgobject-2.0-0.dll</li>
      <li>libgtk-win32-2.0-0.dll</li>
      <li>libharfbuzz-0.dll</li>
      <li>libintl-8.dll</li>
      <li>libpango-1.0-0.dll</li>
      <li>libpangocairo-1.0-0.dll</li>
      <li>libpangoft2-1.0-0.dll</li>
      <li>libpangowin32-1.0-0.dll</li>
      <li>libpcre-1.dll</li>
      <li>libpixman-1-0.dll</li>
      <li>libpng16-16.dll</li>
      <li>libstdc++-6.dll</li>
      <li>libwinpthread-1.dll</li>
      <li>zlib1.dll</li>
    </ul>
  </li>
</ol>

      <br>
<footer>
  <div class="container">
  <div class="row">
    <div class="col-sm-12" align="center">
      <a href="https://github.com/revbayes">GitHub</a> | <a href="/license">License</a> | <a href="/citation">Citation</a> | <a href="https://groups.google.com/forum/#!forum/revbayes-users">Users Forum</a>
    </div>
  </div>
  <br>
  </div>
</footer>

    </div>
    <script src="/assets/js/vendor/jquery.min.js"></script>
<script src="/assets/js/vendor/FileSaver.min.js"></script>
<script src="/assets/js/vendor/jszip.min.js"></script>
<script src="/assets/js/vendor/bootstrap.min.js"></script>

<script type="text/javascript">
// Add default language
$(":not(code).highlighter-rouge").each(function() {
  
  if( this.classList == "highlighter-rouge") {
    this.classList = "bash highlighter-rouge";
  }
  
});
// $("code.highlighter-rouge").each(function() {
//   
//   if( this.classList == "highlighter-rouge") {
//       this.classList = "bash highlighter-rouge";
//   }
//   
// });
</script>
<script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      processEscapes: true
    }
    });
    MathJax.Hub.Queue(function () {
      $(".aside").each(function() {
          $("div .MathJax", this).hide();
      });
    });
</script>
<script src="/assets/js/base.js"></script>

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0Y03X9Q2TJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0Y03X9Q2TJ');
</script>

  </body>
</html>
